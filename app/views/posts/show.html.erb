<h1><%= @post.title %></h1>
<div class="post-content">
  <%= simple_format(@post.body) %>
</div>

<hr>
<div class="d-flex gap-2">
  <%= link_to "Редактировать", edit_post_path(@post), class: 'btn btn-warning' %>
  <%= button_to "Удалить", post_path(@post), 
      method: :delete, 
      form: { data: { turbo_confirm: "Хотите удалить статью?" } }, 
      class: 'btn btn-danger' %>
</div>

<hr>
<h2>Все комментарии</h2>
<% @post.comments.each do |comment| %>
    <div class="alert alert-light">  
        <div class="d-flex justify-content-between">
            <div>
                <p class="mb-1"><strong><%= comment.username %></strong></p>
                <p class="mb-0"><%= comment.body %></p>
            </div>
            <%= button_to "Удалить", post_comment_path(@post, comment), 
                method: :delete, 
                form: { data: { turbo_confirm: "Удалить комментарий?" }, class: 'd-inline' }, 
                class: 'btn btn-sm btn-outline-danger align-self-start' %>
        </div>
    </div>
<% end %>

<h2>Добавление комментария</h2>
<%= form_for([@post, @post.comments.build], data: { turbo: false }) do |f| %>
    <div class="mb-3">
        <%= f.label :username, "Пользователь", class: "form-label" %><br>
        <%= f.text_field :username, class: "form-control" %>
    </div>

    <div class="mb-3">
        <%= f.label :body, "Текст комментария", class: "form-label" %><br>
        <%= f.text_area :body, class: "form-control", rows: 3 %>
    </div>

    <div class="mb-3">
        <%= f.submit "Добавить", class: "btn btn-warning" %>
    </div>
<% end %>